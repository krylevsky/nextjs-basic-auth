"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e=(t=require("regenerator-runtime"))&&"object"==typeof t&&"default"in t?t.default:t;function r(t,e,r,n,o,u,a){try{var i=t[u](a),s=i.value}catch(t){return void r(t)}i.done?e(s):Promise.resolve(s).then(n,o)}function n(t){return function(){var e=this,n=arguments;return new Promise((function(o,u){var a=t.apply(e,n);function i(t){r(a,o,u,i,s,"next",t)}function s(t){r(a,o,u,i,s,"throw",t)}i(void 0)}))}}var o=function(t){var e=t.split(" ")[1],r=Buffer.from(e,"base64").toString().split(":");return[r[0],r[1]]},u=function(t,e,r){return r.find((function(r){return r.user===t&&r.password===e}))||!1};function a(){return(a=n(e.mark((function t(r,n,a){var i;return e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.headers.authorization?(i=o(r.headers.authorization),u(i[0],i[1],a)||(n.setHeader("WWW-Authenticate",'Basic realm="Protected"'),n.statusCode=401)):(n.setHeader("WWW-Authenticate",'Basic realm="Protected"'),n.statusCode=401,n.end("<html>Unauthorized</html>"));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}exports.default=function(t){void 0===t&&(t={});var e=t.users;if(!e)throw new Error("You must supply an array of user/password combinations in the config.");return function(t,r){!function(t,e,r){a.apply(this,arguments)}(t,r,e)}};
//# sourceMappingURL=nextjs-basic-auth.cjs.production.min.js.map
